# CLI Workflow Map

The CLI Workflow Map command generates a comprehensive view of all `sc` commands and their connections to Standard Operating Procedures (SOPs).

## Usage

```bash
sc cli workflow-map [options]
```

## Options

| Option | Description |
|--------|-------------|
| `--format <type>` | Output format: `ascii` (default), `markdown`, `json` |
| `--output <path>` | Save output to file |
| `-v, --verbose` | Verbose output |

## Examples

### Quick Reference (ASCII Tree)

```bash
sc cli workflow-map
```

Output:
```
SC CLI COMMAND TREE
==================================================
Generated: 2025-12-03T06:26:23.395Z
Total Commands: 23

sc
â”œâ”€â”€ requirement (alias: req)
â”‚       ðŸ“š SOPs: SOP-0.1.18, SOP-0.1.17, SOP-5.01, SOP-3.03
â”œâ”€â”€ validate
â”‚       ðŸ“š SOPs: SOP-0.1.18, SOP-0.1.17, SOP-3.03
â”œâ”€â”€ feature
â”‚   â”œâ”€â”€ create
â”‚   â”œâ”€â”€ validate
â”‚   â”œâ”€â”€ move
â”‚   â””â”€â”€ sync
â”‚       ðŸ“š SOPs: SOP-T.06
â”œâ”€â”€ git-smart
â”‚       ðŸ“š SOPs: SOP-11.01, SOP-T.01, SOP-T.07, SOP-0.1.12, ...
...
```

### Full Documentation (Markdown)

```bash
sc cli workflow-map --format markdown
```

Generates detailed documentation including:
- All commands with descriptions
- Arguments and options
- Actions/subcommands
- SOP references with usage examples
- Implementation file locations

### Programmatic Use (JSON)

```bash
sc cli workflow-map --format json
```

Returns structured JSON with:
- Command metadata
- Option definitions
- SOP cross-references
- Usage examples from documentation

### Save to File

```bash
# Save markdown documentation
sc cli workflow-map --format markdown --output docs/reference/CLI-COMMAND-TREE.md

# Save JSON for tooling
sc cli workflow-map --format json --output docs/reference/cli-command-tree.json
```

## Output Structure (JSON)

```json
{
  "metadata": {
    "generated": "2025-12-03T06:26:23.395Z",
    "totalCommands": 23
  },
  "commands": {
    "requirement": {
      "name": "requirement",
      "description": "Manage requirements",
      "alias": "req",
      "options": [
        { "flags": "--priority <level>", "description": "Priority level" }
      ],
      "arguments": [
        { "syntax": "[args...]", "description": "Action arguments" }
      ],
      "actions": ["new", "list", "show", "validate", "update", "delete"],
      "sopReferences": [
        {
          "sopId": "SOP-5.01",
          "title": "Technical Requirements Development",
          "usages": ["sc requirement new \"User Authentication\" --epic=auth"]
        }
      ]
    }
  }
}
```

## How It Works

The CLI workflow map is generated by:

1. **Parsing program.js** - Extracts command definitions using AST analysis
2. **Analyzing implementations** - Detects subcommands and actions from handler code
3. **Scanning SOPs** - Finds all `sc <command>` references in documentation
4. **Cross-referencing** - Links commands to their SOP documentation

## Use Cases

### For AI Agents

AI agents can use the JSON output to:
- Determine which command to use for a task
- Find the correct options and arguments
- Reference relevant SOPs for context

### For Documentation

Keep documentation in sync:
```bash
# Regenerate after CLI changes
sc cli workflow-map --format markdown --output docs/reference/CLI-COMMAND-TREE.md
git add docs/reference/
git commit -m "docs: Update CLI workflow map"
```

### For Dashboards

The dashboard uses the JSON output to provide an interactive CLI explorer:
- Search commands by name or description
- Filter by SOP references
- View command details and examples

## Related Commands

- [`sc help`](./help.md) - General help system
- [`sc docs`](./docs.md) - Documentation management
- [`sc workflow`](./workflow.md) - Workflow state management

## Related SOPs

- [SOP-T.01: Using sc CLI](../../workflow/sops/tools/SOP-T.01-using-sc-cli.md)
- [SOP-0.1: AI-Accelerated Workflow](../../workflow/sops/SOP-0.1-ai-accelerated-workflow-overview.md)



